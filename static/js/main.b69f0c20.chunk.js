(this["webpackJsonpjetcake-project"]=this["webpackJsonpjetcake-project"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(36),c=a.n(l),o=(a(55),a(9)),u=(a(56),a(19)),s=a(20),i=a(23),m=a(22),p=a(24),d=a(32),h=a.n(d),b=a(42),E=a.n(b),f=a(30),v=a.n(f),g=a(43),y=a.n(g),j=a(31),w=a.n(j),k=a(44),C=a.n(k),O=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{alt:"nature",src:C.a})),r.a.createElement(y.a,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Body,null,r.a.createElement(w.a,null,r.a.createElement(E.a,null,"Informational section below hero image"),r.a.createElement("article",null,r.a.createElement("p",null,"Chocolate I love sesame snaps drag\xe9e souffl\xe9 I love halvah. Jujubes tiramisu chocolate bar gummies icing I love jujubes. Gummi bears gingerbread donut marzipan cotton candy I love. Fruitcake lollipop pastry pudding sugar plum I love apple pie cookie danish. Candy cake chocolate cake chocolate cake powder cotton candy caramels gummi bears. Cake bonbon pie pastry. Drag\xe9e tart candy chocolate muffin. Toffee oat cake muffin powder biscuit chocolate cake pastry. Donut muffin chupa chups lollipop dessert icing gummi bears cake. Lemon drops marzipan sesame snaps fruitcake I love. Jelly beans bear claw biscuit drag\xe9e cookie. Marshmallow candy canes jelly. Macaroon fruitcake pastry caramels tiramisu. Bear claw chupa chups marshmallow biscuit danish powder topping tiramisu chocolate. Marshmallow jelly cookie I love. Tootsie roll cupcake chocolate cookie cookie icing jelly-o. Jujubes macaroon wafer. Cupcake icing powder liquorice bear claw jujubes biscuit wafer. Macaroon cupcake apple pie tootsie roll tiramisu I love I love. Jujubes jelly I love sweet. Jelly jelly jelly-o sweet chocolate cake dessert carrot cake. Carrot cake chocolate bar lemon drops. Apple pie danish tiramisu sweet roll I love. Donut macaroon gummies donut wafer I love gummies sesame snaps. Bonbon liquorice jelly fruitcake I love apple pie bear claw brownie. Pastry I love croissant jelly-o jelly. Macaroon I love biscuit I love danish jelly biscuit cake dessert. Cake chupa chups sweet roll carrot cake pudding topping lemon drops carrot cake gummi bears. Chocolate cake tootsie roll lemon drops cake I love. Donut gingerbread bear claw apple pie muffin donut cookie I love tootsie roll. Lemon drops jelly beans chocolate chocolate lollipop chocolate bar cupcake dessert caramels. Chocolate bar biscuit marshmallow. Cookie muffin jelly. Fruitcake pastry toffee I love gummi bears chocolate bar jelly-o. Liquorice jelly jelly-o croissant oat cake. Gummies cake I love macaroon icing jelly wafer. Lollipop chocolate bar I love. Sweet roll I love chocolate. Jelly-o jujubes ice cream liquorice danish caramels carrot cake. Cheesecake bonbon cookie ice cream cotton candy jelly jelly-o muffin. Bonbon lollipop jelly beans toffee cotton candy I love apple pie. Pastry tootsie roll chupa chups chocolate macaroon.")))))))}}]),t}(n.Component),I=a(7),x=a(11),S=a.n(x),U=a(15),F=a(1),L=a(26),q=a.n(L),A=a(27),N=a.n(A),D=(a(96),a(98),a(120),{apiKey:"AIzaSyDQ7m8Xy020SmLvdJCS2oTP2Rgfs3QpmlA",authDomain:"jetcake-miedzyslowami-project.firebaseapp.com",databaseURL:"https://jetcake-miedzyslowami-project.firebaseio.com",projectId:"jetcake-miedzyslowami-project",storageBucket:"jetcake-miedzyslowami-project.appspot.com",messagingSenderId:"497816512119"}),z=new(function(){function e(){Object(u.a)(this,e),N.a.initializeApp(D),this.auth=N.a.auth(),this.db=N.a.firestore(),this.storage=N.a.storage()}return Object(s.a)(e,[{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"authorize",value:function(e){return this.auth.onAuthStateChanged(e)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"register",value:function(e,t){return S.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S.a.awrap(this.auth.createUserWithEmailAndPassword(e,t));case 2:case"end":return a.stop()}}),null,this)}},{key:"addUserData",value:function(e,t,a,n,r,l,c,o,u){return this.auth.currentUser?this.db.doc("jetcake-miedzyslowami-project/".concat(this.auth.currentUser.uid)).set({address:e,phone:t,birthday:a,question1:n,answear1:r,question2:l,answear2:c,question3:o,answear3:u}):alert("Access denied")}},{key:"addUserAvatar",value:function(e){if(e)return this.auth.currentUser?this.storage.ref("avatars/".concat(this.auth.currentUser.uid)).put(e):alert("Access denied")}},{key:"getUserData",value:function(){return S.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser){e.next=2;break}return e.abrupt("return",alert("Access denied"));case 2:return e.abrupt("return",this.db.doc("jetcake-miedzyslowami-project/".concat(this.auth.currentUser.uid)).get().then((function(e){if(e.exists)return e.data();console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)})));case 3:case"end":return e.stop()}}),null,this)}},{key:"getUserAvatar",value:function(){return S.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser){e.next=2;break}return e.abrupt("return",alert("Access denied"));case 2:return e.abrupt("return",this.storage.ref("avatars/".concat(this.auth.currentUser.uid)).getDownloadURL().then((function(e){if(e)return e;console.log("No avatar exists")})).catch((function(e){console.log("Error getting avatar:",e)})));case 3:case"end":return e.stop()}}),null,this)}},{key:"getCurrentUser",value:function(){return this.auth.currentUser.email}}]),e}()),B=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),u=Object(o.a)(c,2),s=u[0],i=u[1],m=Object(n.useState)(""),p=Object(o.a)(m,2),d=p[0],h=p[1],b=Object(n.useState)(""),E=Object(o.a)(b,2),f=E[0],g=E[1],y=Object(n.useState)(""),j=Object(o.a)(y,2),w=j[0],k=j[1],C=Object(n.useState)(""),O=Object(o.a)(C,2),I=O[0],x=O[1],L=Object(n.useState)(""),A=Object(o.a)(L,2),N=A[0],D=A[1],B=Object(n.useState)(""),P=Object(o.a)(B,2),H=P[0],J=P[1],M=Object(n.useState)(""),R=Object(o.a)(M,2),Q=R[0],T=R[1],W=Object(n.useState)(""),G=Object(o.a)(W,2),K=G[0],X=G[1],Y=Object(n.useState)(""),$=Object(o.a)(Y,2),V=$[0],Z=$[1];Object(n.useEffect)((function(){_()}),[]);var _=function(){z.getUserData().then((function(e){l(e.question1),i(e.question2),h(e.question3),g(e.answear1),k(e.answear2),x(e.answear3),D(e.birthday),J(e.phone),T(e.address)})).then(z.getUserAvatar().then((function(e){Z(e)})))},ee=Object(n.useCallback)((function(e){var t,a,n,r,l,c,o,u,s,i;return S.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return e.preventDefault(),t=e.target.elements,a=t.address,n=t.phone,r=t.birthday,l=t.question1,c=t.answear1,o=t.question2,u=t.answear2,s=t.question3,i=t.answear3,m.prev=2,m.next=5,S.a.awrap(z.getCurrentUser());case 5:return m.next=7,S.a.awrap(z.addUserData(a.value,n.value,r.value,l.value,c.value,o.value,u.value,s.value,i.value).then(alert("Profile updated")));case 7:return m.next=9,S.a.awrap(z.addUserAvatar(K));case 9:m.next=14;break;case 11:m.prev=11,m.t0=m.catch(2),alert(m.t0);case 14:case"end":return m.stop()}}),null,null,[[2,11]])}),[K]);return r.a.createElement("form",{onSubmit:ee},r.a.createElement(F.Field,null,r.a.createElement(v.a,{size:128,className:"avatar",alt:"user avatar",src:V||"http://bulma.io/images/placeholders/128x128.png"}),r.a.createElement(F.InputFile,{name:"avatar",type:"file",value:K,onChange:function(e){!function(e){Z(URL.createObjectURL(e)),X(e)}(e.target.files[0])}})),r.a.createElement(F.Field,null,r.a.createElement(F.Label,{htmlFor:"address"},"Address"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{type:"text",placeholder:"Address",name:"address",value:Q,onChange:function(e){return T(e.target.value)}}))),r.a.createElement(F.Field,null,r.a.createElement(F.Label,{htmlFor:"phone"},"Phone number"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{type:"number",placeholder:"Phone number",name:"phone",value:H,onChange:function(e){return J(e.target.value)}}))),r.a.createElement(F.Field,null,r.a.createElement(F.Label,null,"Date of birth"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{name:"birthday",type:"date",placeholder:"birthday",value:N,onChange:function(e){return D(e.target.value)}}))),r.a.createElement(F.Field,null,r.a.createElement(F.Label,{htmlFor:"question1"},"Security question 1"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{type:"text",placeholder:"Question 1",name:"question1",value:a,onChange:function(e){return l(e.target.value)}})),r.a.createElement(F.Label,{htmlFor:"answear1"},"Security answear 1"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{type:"text",placeholder:"Answear 1",name:"answear1",value:f,onChange:function(e){return g(e.target.value)}}))),r.a.createElement(F.Field,null,r.a.createElement(F.Label,{htmlFor:"question2"},"Security question 2"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{type:"text",placeholder:"Question 2",name:"question2",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement(F.Control,null,r.a.createElement(F.Label,{htmlFor:"answear2"},"Security answear 2"),r.a.createElement(F.Input,{type:"text",placeholder:"Answear 2",name:"answear2",value:w,onChange:function(e){return k(e.target.value)}}))),r.a.createElement(F.Field,null,r.a.createElement(F.Label,{htmlFor:"question3"},"Security question 3"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{type:"text",placeholder:"Question 3",name:"question3",value:d,onChange:function(e){return h(e.target.value)}})),r.a.createElement(F.Label,{htmlFor:"answear3"},"Security answear 3"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{type:"text",placeholder:"Answear 3",name:"answear3",value:I,onChange:function(e){return x(e.target.value)}}))),r.a.createElement(F.Field,{kind:"group"},r.a.createElement(F.Control,null,r.a.createElement(q.a,{className:"is-primary",type:"submit"},"Update your data")),r.a.createElement(F.Control,null,r.a.createElement(U.b,{to:"/",className:"button is-primary is-outlined",color:"link"},"Cancel"))),r.a.createElement(F.Field,null,r.a.createElement(F.Control,null,r.a.createElement(q.a,{className:"is-danger is-outlined",onClick:function(){return z.logout()}},"Sign out"))))},P=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.Section,null,r.a.createElement(I.Hero,null,r.a.createElement(I.Hero.Body,null,r.a.createElement(I.Container,null,r.a.createElement(I.Heading,{className:"is-size-4"},"Hello ",z.getCurrentUser(),"!"),r.a.createElement(I.Content,null,r.a.createElement(B,{userData:z.getUserData().then((function(e){return e}))})))))))}}]),t}(n.Component),H=a(47),J=a.n(H),M=a(48),R=a.n(M),Q=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,null,r.a.createElement(w.a,null,r.a.createElement(J.a,{style:{textAlign:"center"}},r.a.createElement("p",null," ",r.a.createElement("strong",null,"Miedzyslowami 2020")))))}}]),t}(n.Component),T=a(12),W=a(25),G=a.n(W),K=r.a.createContext(),X=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(o.a)(a,2),c=l[0],u=l[1];return Object(n.useEffect)((function(){z.authorize(u)}),[]),r.a.createElement(K.Provider,{value:{currentUser:c}},t)},Y=a(49),$=function(e){var t=e.component,a=Object(Y.a)(e,["component"]),l=Object(n.useContext)(K).currentUser;return r.a.createElement(T.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(T.a,{to:"/login"})}}))},V=Object(T.g)((function(e){var t=e.history,a=Object(n.useCallback)((function(e){var a,n,r;return S.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e.preventDefault(),a=e.target.elements,n=a.email,r=a.password,l.prev=2,l.next=5,S.a.awrap(z.login(n.value,r.value));case 5:t.push("/profile"),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(2),alert(l.t0);case 11:case"end":return l.stop()}}),null,null,[[2,8]])}),[t]),l=Object(n.useContext)(K).currentUser;return l?r.a.createElement(T.a,{to:"/profile",user:l}):r.a.createElement(I.Section,null,r.a.createElement(I.Hero,null,r.a.createElement(I.Heading,null,"Log in"),r.a.createElement(I.Hero.Body,null,r.a.createElement(I.Container,null,r.a.createElement(I.Card,null,r.a.createElement("form",{onSubmit:a},r.a.createElement(F.Field,null,r.a.createElement(F.Label,null,"Email"),r.a.createElement(F.Control,null,r.a.createElement("input",{className:"input",name:"email",type:"email",placeholder:"email"}))),r.a.createElement(F.Field,null,r.a.createElement(F.Label,null,"Password"),r.a.createElement(F.Control,null,r.a.createElement("input",{className:"input",name:"password",type:"password",placeholder:"password"}))),r.a.createElement(F.Field,{className:"is-grouped"},r.a.createElement(F.Control,null,r.a.createElement(q.a,{className:"is-primary",type:"submit"},"Log in")),r.a.createElement(F.Control,null,r.a.createElement(U.b,{className:"button is-primary is-outlined",to:"/register"},"or register")))))))))})),Z=Object(T.g)((function(e){var t=e.history,a=Object(n.useState)(""),l=Object(o.a)(a,2),c=l[0],u=l[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),m=i[0],p=i[1],d=Object(n.useCallback)((function(e){var a,n,r;return S.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e.preventDefault(),a=e.target.elements,n=a.email,r=a.password,l.prev=2,l.next=5,S.a.awrap(z.register(n.value,r.value));case 5:t.push("/profile"),alert("Thank you for registration. You can now update your user data"),l.next=12;break;case 9:l.prev=9,l.t0=l.catch(2),alert(l.t0);case 12:case"end":return l.stop()}}),null,null,[[2,9]])}),[t]);return r.a.createElement("form",{onSubmit:d},r.a.createElement(I.Section,null,r.a.createElement(I.Hero,null,r.a.createElement(I.Heading,null,"Register new user"),r.a.createElement(I.Hero.Body,null,r.a.createElement(I.Container,null,r.a.createElement(I.Card,null,r.a.createElement(F.Field,null,r.a.createElement(F.Label,null,"Email"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{className:"input",name:"email",type:"email",placeholder:"email",value:c,onChange:function(e){return u(e.target.value)},required:!0}))),r.a.createElement(F.Field,null,r.a.createElement(F.Label,null,"Password"),r.a.createElement(F.Control,null,r.a.createElement(F.Input,{className:"input",name:"password",type:"password",placeholder:"password",value:m,onChange:function(e){return p(e.target.value)},required:!0}))),r.a.createElement(I.Button,{type:"submit",className:"is-primary"},"Register")))))))}));var _=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return r.a.createElement(X,null,r.a.createElement(U.a,{basename:"jetcake-project"},r.a.createElement(G.a,{className:"is-primary is-size-4"},r.a.createElement(G.a.Brand,{onClick:function(){n(!a)}},r.a.createElement("p",{className:"navbar-item"},"Jetcake-project"),r.a.createElement(G.a.Burger,null)),r.a.createElement(G.a.Menu,{className:a?"is-active":""},r.a.createElement(G.a.Container,{onClick:function(){n(!1)}},r.a.createElement(U.b,{className:"navbar-item",to:"/"}," Home "),r.a.createElement(U.b,{className:"navbar-item",to:"/profile"}," Profile "),r.a.createElement(U.b,{className:"navbar-item",to:"/login"}," Login ")))),r.a.createElement(T.d,null,r.a.createElement($,{path:"/profile",component:P}),r.a.createElement(T.b,{exact:!0,path:"/"},r.a.createElement(O,null)),r.a.createElement(T.b,{exact:!0,path:"/login"},r.a.createElement(V,null)),r.a.createElement(T.b,{exact:!0,path:"/register"},r.a.createElement(Z,null))),r.a.createElement(Q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},44:function(e,t,a){e.exports=a.p+"static/media/daylight-environment-forest-idyllic-459225.15a2aed1.jpg"},50:function(e,t,a){e.exports=a(119)},55:function(e,t,a){},56:function(e,t,a){}},[[50,1,2]]]);
//# sourceMappingURL=main.b69f0c20.chunk.js.map